@if (plantService.plant$ | async; as plant) {
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{ 'general.fertilizer' | translate }}
      </mat-panel-title>
      <mat-panel-description class="expansion-panel-icon-right">
        <mat-icon>local_pizza</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    @if (plant.fertFreq || plant.fertLast) {
      @if (plant.fertLast) {
        <p>
          <b>{{ 'general.lastTime' | translate }}</b> {{ plant.fertLast | date }}
        </p>
      }

      @if (plant.fertType) {
        <p>
          <b>{{ 'plant-widget-fertilizer.type' | translate }}:</b> {{ plant.fertType }}
        </p>
      }

      @if (plant.fertFreq) {
        <p
          [innerHTML]="'plant-widget-fertilizer.freq' | translate:{ days: plant.fertFreq }"
        >
        </p>
      }

      @if (plant.fertNext) {
        <p>
          @if (plant.fertNext | daysAgo:false; as days) {
            <b>{{ 'general.nextTime' | translate }}</b>
            
            @if (days < 0) {
              <span [ngStyle]="{ 'color': 'red' }">
                {{ 'general.daysAgo' | translate:{ days: (plant.fertNext | daysAgo) } }}
              </span>
            } @else {
              {{ 'general.daysCount' | translate:{ days: (plant.fertNext | daysAgo) } }}
            }
          }
        </p>
      }
    } @else {
      <p>{{ 'plant-widget-fert.noData' | translate }}</p>
    }

    @if (plantService.owned) {
      <mat-action-row>
        <button mat-button color="primary" (click)="openFertDialog()">
          {{ 'plant-widget-fert.now' | translate }}
        </button>
        <button mat-button color="primary" (click)="openEdit()">
          {{ 'general.edit' | translate }}
        </button>
      </mat-action-row>
    }
  </mat-expansion-panel>
}
