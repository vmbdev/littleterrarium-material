@if ((mt.hidden$ | async) == false) {
  <mat-toolbar color="primary" class="toolbar">
    <mat-toolbar-row>
      <button mat-icon-button (click)="goBack()">
        <mat-icon>arrow_back_ios_new</mat-icon>
      </button>
      <span class="toolbar__title">{{ mt.name$ | async }}</span>
      <span class="toolbar-spacer"></span>

      @for (b of mt.buttons$ | async; track b) {
        <button
          mat-icon-button
          (click)="b.click ? b.click() : null"
          [routerLink]="b.route ? b.route : null"
        >
          <mat-icon>{{ b.icon }}</mat-icon>
        </button>
      }

      @if (mt.menu$ | async; as menuList) {
        @if (menuList.length > 0) {
          <button mat-icon-button [matMenuTriggerFor]="menu">
            <mat-icon>more_vert</mat-icon>
          </button>
        }

        <mat-menu #menu="matMenu">
          @for (item of menuList; track item) {
            @if (item.length === 1) {
              <button
                mat-menu-item
                (click)="item[0].click ? item[0].click() : null"
                [routerLink]="item[0].route ? item[0].route : null"
              >
                <mat-icon>{{ item[0].icon }}</mat-icon>
                @if (item[0].tooltip; as tooltip) {
                  <span>{{ tooltip | transloco }}</span>
                }
              </button>
            } @else {
              <mat-divider></mat-divider>
              <div class="toolbar__menurow">
                @for (i of item; track i) {
                  <button
                    mat-mini-fab
                    class="toolbar__menurowitem"
                    (click)="i.click ? i.click() : null"
                    [routerLink]="i.route ? i.route : null"
                    [color]="
                      (i.selected | async) === true ? 'primary' : 'basic'
                    "
                  >
                    <mat-icon class="toolbar__menurowicon">
                      {{ i.icon }}
                    </mat-icon>
                  </button>
                }
              </div>
            }
          }
        </mat-menu>
      }
    </mat-toolbar-row>

    @if (search.enabled$ | async) {
      <mat-toolbar-row color="primary">
        <ltm-search />
      </mat-toolbar-row>
    }
  </mat-toolbar>
}
